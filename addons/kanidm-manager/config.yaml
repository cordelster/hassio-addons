name: Kanidm Manager
version: 1.0.7
slug: kanidm-manager
description: Web UI for managing Kanidm OAuth2 clients, users, and groups
url: https://github.com/cordelster/ha-addon-kanidm
arch:
  - aarch64
  - amd64
  - armv7
init: false
startup: application
boot: auto
ports:
  3000/tcp: null
ports_description:
  3000/tcp: "Direct access bypass (no auth). Leave disabled - use sidebar via Ingress instead."

# Ingress for Home Assistant sidebar
ingress: true
ingress_port: 3000
panel_icon: mdi:account-cog
panel_title: Kanidm Manager
panel_admin: true

map:
  - ssl:ro

hassio_api: false
hassio_role: default
auth_api: false
homeassistant_api: false

options:
  kanidm_url: "https://??????-kanidm:4869"
  kanidm_username: "idm_admin"
  kanidm_password: ""
  origin: "http://localhost:3000"

  # ==========================================
  # TLS (Collapsible)
  # ==========================================
  # Provide a CA certificate to establish trust with self-signed certs.
  # For JamBoxKanidm SELFIE certs use:
  #   /ssl/JamBoxKanidm-SELFIE-CA-Chain.pem
  # Leave empty and enable accept_invalid_certs below as a fallback.
  tls:
    ca_cert_path: "/ssl/JamBoxKanidm-SELFIE-CA-Chain.pem"
    accept_invalid_certs: false

schema:
  kanidm_url: str
  kanidm_username: str
  kanidm_password: password
  origin: str
  tls:
    ca_cert_path: str?
    accept_invalid_certs: bool
